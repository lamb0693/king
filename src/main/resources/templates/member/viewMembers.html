<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout.html}">

<div class="container" layout:fragment="content">
    <div class="alert alert-dark" role="alert">
        Member Table
    </div>

    <table class="table">
        <thead>
            <tr>
                <th scope="col">id</th>
                <th scope="col">nickname</th>
                <th scope="col">role</th>
                <th scope="col">joindate</th>
                <th scope="col">계정 차단</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="member : ${members}">
                <td th:text="${member.id}"></td>
                <td th:text="${member.nickname}"></td>
                <td th:text="${member.role}"></td>
                <td th:text="${member.joindate}"></td>
                <td th:if="${member.locked}"><a class="text-decoration-none" th:href="@{/member/freeId/{id}(id=${member.id})}">계정 차단 해제</a></td>
                <td th:unless="${member.locked}"><a class="text-decoration-none" th:href="@{/member/blockId/{id}(id=${member.id})}">계정 차단</a></td>
            </tr>
        </tbody>
    </table>
    <div id="divPaging" class="fs-4">

    </div>

    <script src="/js/paging.js"></script>
</div>

<th:block layout:fragment="cssFrag">
    <link rel="stylesheet" href="/css/viewMembers.css">
</th:block>

<script layout:fragment="script" th:inline="javascript">

    const MAX_LINK = 5 // 가급적 홀수로
    const BASE_URL = "/member/list?"

    const pageSize = Number ([[${pageSize}]] )
    const totalElement = Number( [[${totalElement}]] )
    const currentPage = Number( [[${currentPage}]] )

    const divPaging = document.getElementById("divPaging");

    const anchorList = customPaging(MAX_LINK, BASE_URL, pageSize, totalElement, currentPage)

    anchorList.forEach( (anchor) => divPaging.appendChild(anchor))

</script>
